function darkModeToggle(n){n?(document.body.setAttribute("data-theme","dark"),localStorage.setItem("darkSwitch","dark")):(document.body.removeAttribute("data-theme"),localStorage.setItem("darkSwitch","light"))}function showTimeAgo(n){var r=moment.utc(),u=moment.utc(n),i=r.diff(u,"days"),f=r.diff(u,"hours"),e=r.diff(u,"minutes"),t=" ";return i<1&&f<1?(t=e===1?" minute":" minutes",e+t):i<1?(t=f===1?" hour":" hours",f+t):(t=i===1?" day":" days",i+t)}function formatUrlName(n){var t=n.replace(/ /g,"-");return t.replace(/[^0-9a-zA-Z-]+/g,"")}function objectifyForm(n){for(var i={},t=0;t<n.length;t++)i[n[t].name]=n[t].value;return i}function htmlDecode(n){var t=(new DOMParser).parseFromString(n,"text/html");return t.documentElement.textContent}function showToastMsg(n,t,i,r,u,f,e){var s='<div class="toast w-100 mb-1" role="alert" aria-live="assertive" aria-atomic="true" data-autohide="false">',o="";r===!1&&(o="bg-primary text-white");switch(n){case 0:s+=t===1?'<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Deck Like<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href="/User/'+u+'">'+u+'<\/a> liked <a href="/Deck/Public/'+f+'">'+e+"<\/a><\/div><\/div>":'<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Deck Likes<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href="/User/'+u+'">'+u+"<\/a>  and "+(t-1)+' more liked <a href="/Deck/Public/'+f+'">'+e+"<\/a><\/div><\/div>";break;case 1:s+=t===1?'<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Deck Comment<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href = "/User/'+u+'" > '+u+'<\/a > commented <a href = "/Deck/Public/'+f+'#comments" > '+e+"<\/a><\/div><\/div>":'<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Deck Comments<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href="/User/'+u+'">'+u+"<\/a> and "+(t-1)+' more commented <a href="/Deck/Public/'+f+'#comments">'+e+"<\/a><\/div><\/div>";break;case 2:s+=t===1?'<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">New Follower<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href="/User/'+u+'">'+u+"<\/a> followed you<\/div><\/div>":'<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">New Followers<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href="/User/'+u+'">'+u+"<\/a> and "+(t-1)+" more followed you<\/div><\/div>";break;case 3:s+='<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">New Deck<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href="/User/'+u+'">'+u+'<\/a> created the deck <a href="/Deck/Public/'+f+'">'+e+"<\/a><\/div><\/div>";break;case 4:s+='<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">New Tourney<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href="/User/'+u+'">'+u+'<\/a> created the public Tournament <a href="/Tourney/RoundTourney/'+f+'">'+e+"<\/a><\/div><\/div>";break;case 5:s+=t===1?'<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Article Like<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href="/User/'+u+'">'+u+'<\/a> liked <a href="/Article/'+e+'">'+decodeURIComponent(decodeURI(e.replace(/-/g," ")))+"<\/a><\/div><\/div>":'<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Article Likes<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href="/User/'+u+'">'+u+"<\/a> and "+(t-1)+' more liked <a href="/Article/'+e+'">'+decodeURIComponent(e.replace(/-/g," "))+"<\/a><\/div><\/div>";break;case 6:s+=t===1?'<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Article Comment<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href="/User/'+u+'">'+u+'<\/a> commented <a href="/Article/'+e+'#comments">'+decodeURIComponent(e.replace(/-/g," "))+"<\/a><\/div><\/div>":'<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Article Comments<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href="/User/'+u+'">'+u+"<\/a> and "+(t-1)+' more commented <a href="/Article/'+e+'#comments">'+decodeURIComponent(e.replace(/-/g," "))+"<\/a><\/div><\/div>";break;case 7:s+='<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Global message<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1">'+e+"<\/div><\/div>";break;case 9:s+='<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">New Article<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href="/User/'+u+'">'+u+'<\/a> published <a href="/Article/'+e+'">a new article<\/a><\/div><\/div>';break;case 10:s+='<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Team Application<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1"><a href="/User/'+u+'">'+u+'<\/a> applied to <a href="/Community/'+e.replace(" ","-")+'">'+e+"<\/a><\/div><\/div>";break;case 11:s+='<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Team Joined<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1">You joined <a href="/Community/'+e.replace(" ","-")+'">'+e+"<\/a><\/div><\/div>";break;case 12:s+='<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Team Left<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1">You were removed from <a href="/Community/'+e.replace(" ","-")+'">'+e+"<\/a><\/div><\/div>";break;case 13:s+='<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Reward<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1">You got a reward: <a href="/Manage/Orders#rewards">'+e+"<\/a><\/div><\/div>";break;case 14:s+='<div class="toast-header pt-0 pb-0 '+o+'"><strong class="mr-auto">Reward<\/strong><small>'+i+'<\/small><\/div><div class="toast-body pt-1 pb-1">You got <a href="/Manage/EditProfile">'+e+' Gift Points<\/a> from <a href="/User/'+u+'">'+u+"<\/a><\/div><\/div>"}return s}function popupMessage(n,t,i){$("#popupMsg").toggleClass("alert-success",!i).toggleClass("alert-danger",i).html(n).toggleClass("show",!0);setTimeout(function(){$("#popupMsg").toggleClass("show",!1)},t)}function getUrlParams(n){var t={},i=decodeURIComponent(window.location.href.slice(window.location.href.indexOf("?")+1)),r=i.split("&");return r.forEach(function(n){var i=n.split("=",2);t[i[0]]=i[1]}),n&&n in t?t[n]:t}function formSubmit(){var n=Cookies.get("ah_timestamp_");return n?Date.now()-n>15e3?Cookies.set("ah_timestamp_",Date.now())?!0:(alert("Your browser does not support this action"),!1):(alert("Database not ready, please try again in a couple of seconds"),!1):Cookies.set("ah_timestamp_",Date.now())?!0:(alert("Your browser does not support this action"),!1)}var visAPI=function(){var n,t,i={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(n in i)if(n in document){t=i[n];break}return function(i){return i&&document.addEventListener(t,i),!document[n]}}(),globalJS={mtgSymbolConverter:function(n,t){return n=n.replace(/{W}/g,'<i class="ms ms-w ms-cost ms-shadow"><\/i>').replace(/{U}/g,'<i class="ms ms-u ms-cost ms-shadow"><\/i>').replace(/{B}/g,'<i class="ms ms-b ms-cost ms-shadow"><\/i>').replace(/{R}/g,'<i class="ms ms-r ms-cost ms-shadow"><\/i>').replace(/{G}/g,'<i class="ms ms-g ms-cost ms-shadow"><\/i>').replace(/{W\/U}/g,'<i class="ms ms-wu ms-split ms-cost ms-shadow"><\/i>').replace(/{W\/B}/g,'<i class="ms ms-wb ms-split ms-cost ms-shadow"><\/i>').replace(/{U\/B}/g,'<i class="ms ms-ub ms-split ms-cost ms-shadow"><\/i>').replace(/{U\/R}/g,'<i class="ms ms-ur ms-split ms-cost ms-shadow"><\/i>').replace(/{B\/R}/g,'<i class="ms ms-br ms-split ms-cost ms-shadow"><\/i>').replace(/{B\/G}/g,'<i class="ms ms-bg ms-split ms-cost ms-shadow"><\/i>').replace(/{R\/W}/g,'<i class="ms ms-rw ms-split ms-cost ms-shadow"><\/i>').replace(/{R\/G}/g,'<i class="ms ms-rg ms-split ms-cost ms-shadow"><\/i>').replace(/{G\/W}/g,'<i class="ms ms-gw ms-split ms-cost ms-shadow"><\/i>').replace(/{G\/U}/g,'<i class="ms ms-gu ms-split ms-cost ms-shadow"><\/i>').replace(/{2\/W}/g,'<i class="ms ms-2w ms-split ms-cost ms-shadow"><\/i>').replace(/{2\/U}/g,'<i class="ms ms-2u ms-split ms-cost ms-shadow"><\/i>').replace(/{2\/B}/g,'<i class="ms ms-2b ms-split ms-cost ms-shadow"><\/i>').replace(/{2\/R}/g,'<i class="ms ms-2r ms-split ms-cost ms-shadow"><\/i>').replace(/{2\/G}/g,'<i class="ms ms-2g ms-split ms-cost ms-shadow"><\/i>').replace(/{W\/P}/g,'<i class="ms ms-wp ms-cost ms-shadow"><\/i>').replace(/{U\/P}/g,'<i class="ms ms-up ms-cost ms-shadow"><\/i>').replace(/{B\/P}/g,'<i class="ms ms-bp ms-cost ms-shadow"><\/i>').replace(/{R\/P}/g,'<i class="ms ms-rp ms-cost ms-shadow"><\/i>').replace(/{G\/P}/g,'<i class="ms ms-gp ms-cost ms-shadow"><\/i>').replace(/{C}/g,'<i class="ms ms-c ms-cost ms-shadow"><\/i>').replace(/{E}/g,'<i class="ms ms-e ms-cost ms-shadow"><\/i>').replace(/{S}/g,'<i class="ms ms-s ms-cost ms-shadow"><\/i>').replace(/{CHAOS}/g,'<i class="ms ms-chaos ms-cost ms-shadow"><\/i>').replace(/\{X}/g,'<i class="ms ms-x ms-cost ms-shadow"><\/i>').replace(/\{0}/g,'<i class="ms ms-0 ms-cost ms-shadow"><\/i>').replace(/\{1}/g,'<i class="ms ms-1 ms-cost ms-shadow"><\/i>').replace(/\{2}/g,'<i class="ms ms-2 ms-cost ms-shadow"><\/i>').replace(/\{3}/g,'<i class="ms ms-3 ms-cost ms-shadow"><\/i>').replace(/\{4}/g,'<i class="ms ms-4 ms-cost ms-shadow"><\/i>').replace(/\{5}/g,'<i class="ms ms-5 ms-cost ms-shadow"><\/i>').replace(/\{6}/g,'<i class="ms ms-6 ms-cost ms-shadow"><\/i>').replace(/\{7}/g,'<i class="ms ms-7 ms-cost ms-shadow"><\/i>').replace(/\{8}/g,'<i class="ms ms-8 ms-cost ms-shadow"><\/i>').replace(/\{9}/g,'<i class="ms ms-9 ms-cost ms-shadow"><\/i>').replace(/\{10}/g,'<i class="ms ms-10 ms-cost ms-shadow"><\/i>').replace(/\{11}/g,'<i class="ms ms-11 ms-cost ms-shadow"><\/i>').replace(/\{12}/g,'<i class="ms ms-12 ms-cost ms-shadow"><\/i>').replace(/\{13}/g,'<i class="ms ms-13 ms-cost ms-shadow"><\/i>').replace(/\{14}/g,'<i class="ms ms-14 ms-cost ms-shadow"><\/i>').replace(/\{15}/g,'<i class="ms ms-15 ms-cost ms-shadow"><\/i>').replace(/\{16}/g,'<i class="ms ms-16 ms-cost ms-shadow"><\/i>').replace(/\{17}/g,'<i class="ms ms-17 ms-cost ms-shadow"><\/i>').replace(/\{18}/g,'<i class="ms ms-18 ms-cost ms-shadow"><\/i>').replace(/\{19}/g,'<i class="ms ms-19 ms-cost ms-shadow"><\/i>').replace(/\{20}/g,'<i class="ms ms-20 ms-cost ms-shadow"><\/i>').replace(/{T}/g,'<i class="ms ms-tap ms-cost ms-shadow"><\/i>').replace(/{Q}/g,'<i class="ms ms-untap ms-cost"><\/i>'),t===!0&&(n=n.replace(/\n/g,"<br />")),n}};$(document).ready(function(){var e=document.getElementById("darkSwitch"),t,n,o,s;e&&typeof darkThemeSelected!="undefined"&&(e.checked=window.darkThemeSelected);$("#ae-logout").click(function(){$("#ae-logout-return").val(window.location.pathname);document.getElementById("logoutForm").submit()});window.addEventListener("resize",onresize);$("#sidebarCollapse").on("click",function(){$("#sidebar").addClass("ae-show-sidebar");$(".collapse.in").toggleClass("in");var n=document.createElement("div");n.className+="modal-backdrop fade show";n.setAttribute("id","backdrop-overlay");document.body.appendChild(n)});$(document).on("click","#backdrop-overlay, #dismiss",function(){$("#sidebar").removeClass("ae-show-sidebar");document.getElementById("backdrop-overlay").remove()});if($(".toast").toast("show"),t=$("#myNotifications"),t.length)if(typeof Storage!="undefined")if(n=JSON.parse(localStorage.getItem("Notifications")),!n||Date.now()-n.time>864e5)$.ajax({url:"/Home/MyNotifications",type:"POST",dataType:"json",success:function(n){var h,f,e,o,c;if(n.success===!0){var u="",r=0,s=[];if(n.msg.length>0){for(i=0;i<n.msg.length;i++)h={type:n.msg[i].type,read:n.msg[i].read,counter:n.msg[i].counter,usr:n.msg[i].sourceUsername,objectId:n.msg[i].objectId,description:n.msg[i].description,eventTime:n.msg[i].eventTime},f=showTimeAgo(n.msg[i].eventTime),n.msg[i].type===7?(e=JSON.parse(localStorage.getItem("globalNotification")),e?e.msg!==n.msg[i].description&&(localStorage.setItem("globalNotification",JSON.stringify({time:n.msg[i].eventTime,read:!1,msg:n.msg[i].description})),r++,u+=showToastMsg(n.msg[i].type,n.msg[i].counter,f+" ago",n.msg[i].read,n.msg[i].sourceUsername,n.msg[i].objectId,n.msg[i].description)):(localStorage.setItem("globalNotification",JSON.stringify({time:n.msg[i].eventTime,read:!1,msg:n.msg[i].description})),r++,u+=showToastMsg(n.msg[i].type,n.msg[i].counter,f+" ago",n.msg[i].read,n.msg[i].sourceUsername,n.msg[i].objectId,n.msg[i].description))):(s.push(h),n.msg[i].read===!1&&r++,u+=showToastMsg(n.msg[i].type,n.msg[i].counter,f+" ago",n.msg[i].read,n.msg[i].sourceUsername,n.msg[i].objectId,n.msg[i].description));t.html(u);$(".toast").toast("show");t.mCustomScrollbar({theme:"dark"});o=!0;r>0&&($("#ae-bell-counter-badge").attr("data-count",r),o=!1);c={time:Date.now(),read:o,toasts:s};localStorage.setItem("Notifications",JSON.stringify(c))}}}});else{var f="",u=0,r=JSON.parse(localStorage.getItem("globalNotification"));if(n.toasts.length>0||r){if(r&&(o=showTimeAgo(r.time),f+=showToastMsg(7,null,o+" ago",r.read,null,null,r.msg),r.read===!1&&u++,moment.utc().diff(moment.utc(r.time),"days")>5&&localStorage.removeItem("globalNotification")),n.toasts.length>0)for(i=0;i<n.toasts.length;i++)n.toasts[i].read===!1&&u++,s=showTimeAgo(n.toasts[i].eventTime),f+=showToastMsg(n.toasts[i].type,n.toasts[i].counter,s+" ago",n.toasts[i].read,n.toasts[i].usr,n.toasts[i].objectId,n.toasts[i].description);t.html(f);$(".toast").toast("show");t.mCustomScrollbar({theme:"dark"});u>0&&$("#ae-bell-counter-badge").attr("data-count",u)}}else t.html('<div class="toast w-100 mb-1" role="alert" aria-live="assertive" aria-atomic="true" data-autohide="false"><div class="toast-header pt-0 pb-0"><strong class="mr-auto">Error<\/strong><\/div><div class="toast-body pt-1 pb-1">This browser does not support notifications<\/div><\/div>');else typeof Storage!="undefined"&&localStorage.removeItem("Notifications");$("#ae-bell-btn").on("click",function(){var r=$(this),e=$("#myNotifications"),u;if(e.length&&(u=r.children().attr("data-count"),u>0&&(r.children().removeAttr("data-count"),typeof Storage!="undefined"))){var f=0,n=JSON.parse(localStorage.getItem("Notifications")),t=JSON.parse(localStorage.getItem("globalNotification"));if(n&&n.toasts.length>0){for(i=0;i<n.toasts.length;i++)n.toasts[i].read===!1&&(n.toasts[i].read=!0,f++);localStorage.setItem("Notifications",JSON.stringify(n))}t&&t.read===!1&&localStorage.setItem("globalNotification",JSON.stringify({time:t.time,read:!0,msg:t.msg}));f>0&&$.ajax({url:"/Home/ReadNotifications",type:"POST",dataType:"json",success:function(){}})}});$("#login-dp .social-buttons a").on("click",function(n){var t=$(this).data("value");$("#"+t).click();n.preventDefault()});$(".modal").on("shown.bs.modal",function(){$(this).find("[autofocus]:first").focus()});$("#sidebarCollapse").on("click",function(){$("#sidebar").toggleClass("active")})});